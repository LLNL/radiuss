---
event_type: PushEvent
avatar: "https://avatars.githubusercontent.com/u/455297?"
user: koning
date: 2023-03-28
repo_name: LLNL/merlin
html_url: https://github.com/LLNL/merlin/commit/535a4bf5cf98f092b27262e6fd8396b06ee11d76
repo_url: https://github.com/LLNL/merlin
---

<a href='https://github.com/koning' target='_blank'>koning</a> pushed to <a href='https://github.com/LLNL/merlin' target='_blank'>LLNL/merlin</a>

<small>Feature/flux new api (#407)

* Update flux run command.

* Update get_flux_cmd and add get_flux_alloc. Use these functions in all cases.

* Update get_flux_alloc and test_definitions.py to work for testing.

* Update actual flux version.

* Update CHANGELOG.md with flux version.

* Change DEFAULT_FLUX_VERSION .

* Fix-style

* Return to default flux run in scriptadapter.

* fix bugs for stop-workers and schema validation

fix bugs for stop-workers and schema validation

fix all flags for stop-workers

fix small bug with schema validation

modify CHANGELOG

run fix-style

add myself to contributors list

decouple celery logic from main

remove unused import

make changes Luc requested in PR

* Fix batch flux exe and have test flux script return version as well.

* Make sure test flux decalres itself.
Fix flux alloc full path call.

* Make sure qsub emits fake info.
Check for flux or qsub in env for testing before adding the fake command.

* Move fake commands to test directory

* Remove unneeded f-string.

* Change the scheduler check output strings to be more descriptive.

---------

Co-authored-by: Brian Gunnarson <brianfunnarson14@gmail.com></small>

<a href='https://github.com/LLNL/merlin/commit/535a4bf5cf98f092b27262e6fd8396b06ee11d76' target='_blank'>View Commit</a>