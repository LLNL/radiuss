---
event_type: PushEvent
avatar: "https://avatars.githubusercontent.com/u/299842?"
user: tgamblin
date: 2023-12-27
repo_name: spack/spack
html_url: https://github.com/spack/spack/commit/f721d4c6256c05e40e5b71d8ae570e55ec3d9825
repo_url: https://github.com/spack/spack
---

<a href='https://github.com/tgamblin' target='_blank'>tgamblin</a> pushed to <a href='https://github.com/spack/spack' target='_blank'>spack/spack</a>

<small>papi: patch for cray fortran bug with `-ffree-form` (#41886)

PAPI 7.1.0 unconditionally adds `FFLAGS = -ffree-form` in the sysdetect tests,
regardless of the compiler.

This was added in https://github.com/icl-utk-edu/papi/pull/108 to make a build with
`armflang` work, but it breaks CCE (and our `develop` pipeline).

- [x] Add a patch that fixes both problems
- [x] Patch PAPI when at 7.1.0 or higher</small>

<a href='https://github.com/spack/spack/commit/f721d4c6256c05e40e5b71d8ae570e55ec3d9825' target='_blank'>View Commit</a>