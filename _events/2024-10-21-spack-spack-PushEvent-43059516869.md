---
event_type: PushEvent
avatar: "https://avatars.githubusercontent.com/u/194764?"
user: haampie
date: 2024-10-21
repo_name: spack/spack
html_url: https://github.com/spack/spack/commit/275d1d88f40c348c1eaf07f8941592b2fa373ce6
repo_url: https://github.com/spack/spack
---

<a href='https://github.com/haampie' target='_blank'>haampie</a> pushed to <a href='https://github.com/spack/spack' target='_blank'>spack/spack</a>

<small>avoid double closing of fd in sub-processes (#47035)

Both `multiprocessing.connection.Connection.__del__` and `io.IOBase.__del__` called `os.close` on the same file descriptor. As of Python 3.13, this is an explicit warning. Ensure we close once by usef `os.fdopen(..., closefd=False)`</small>

<a href='https://github.com/spack/spack/commit/275d1d88f40c348c1eaf07f8941592b2fa373ce6' target='_blank'>View Commit</a>