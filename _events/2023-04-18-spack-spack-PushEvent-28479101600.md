---
event_type: PushEvent
avatar: "https://avatars.githubusercontent.com/u/299842?"
user: tgamblin
date: 2023-04-18
repo_name: spack/spack
html_url: https://github.com/spack/spack/commit/01064783314a14a31a502fd48f2507852fe1b908
repo_url: https://github.com/spack/spack
---

<a href='https://github.com/tgamblin' target='_blank'>tgamblin</a> pushed to <a href='https://github.com/spack/spack' target='_blank'>spack/spack</a>

<small>bugfix: don't look up virtual information for unknown packages

`spec_clauses()` attempts to look up package information for concrete specs in order to
determine which virtuals they may provide. This fails for renamed/deleted dependencies
of buildcaches and installed packages.

This will eventually be fixed by #35258, which adds virtual information on edges, but we
need a workaround to make older buildcaches usable.

- [x] make an exception for renamed packages and omit their virtual constraints
- [x] add a note that this will be solved by adding virtuals to edges</small>

<a href='https://github.com/spack/spack/commit/01064783314a14a31a502fd48f2507852fe1b908' target='_blank'>View Commit</a>