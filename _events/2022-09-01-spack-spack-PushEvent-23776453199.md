---
event_type: PushEvent
avatar: "https://avatars.githubusercontent.com/u/6527504?"
user: scottwittenburg
date: 2022-09-01
repo_name: spack/spack
html_url: https://github.com/spack/spack/commit/6239198d65d20d8dfbd15bd617168dd92523e0b7
repo_url: https://github.com/spack/spack
---

<a href='https://github.com/scottwittenburg' target='_blank'>scottwittenburg</a> pushed to <a href='https://github.com/spack/spack' target='_blank'>spack/spack</a>

<small>Fix cause of checksum failures in public binary mirror (#32407)

Move the copying of the buildcache to a root job that runs after all the child
pipelines have finished, so that the operation can be coordinated across all
child pipelines to remove the possibility of race conditions during potentially
simlutandous copies. This lets us ensure the .spec.json.sig and .spack files
for any spec in the root mirror always come from the same child pipeline
mirror (though which pipeline is arbitrary).  It also allows us to avoid copying
of duplicates, which we now do.</small>

<a href='https://github.com/spack/spack/commit/6239198d65d20d8dfbd15bd617168dd92523e0b7' target='_blank'>View Commit</a>